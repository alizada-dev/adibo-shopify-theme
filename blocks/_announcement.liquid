{%- assign plain_text = block.settings.text | strip_html | strip -%}
{%- assign index = section.blocks | find_index: 'id', block.id -%}

{%- unless plain_text == '' -%}
  <div
    x-show="active === {{ index }}"
    class="text-center w-full {{ block.settings.weight }} {{ block.settings.letter_spacing }}"
    style="
      font-size: {{ block.settings.font-size }}px;
      color: var(--announcement-text);
    "
    {{ block.shopify_attributes }}
  >
  
    {% if block.settings.link != blank %}
      <a href="{{ block.settings.link }}" class="relative z-10 pointer-events-auto">
        {{ block.settings.text | strip_html }}
      </a>
      {% else %}
        <p>
          {{ block.settings.text }}
        </p>
    {% endif %}
  </div>
{%- endunless -%}

{% schema %}
{
  "name": "t:names.announcement",
  "tag": null,
  "settings": [
    {
      "type": "inline_richtext",
      "id": "text",
      "label": "t:settings.text",
      "default": "t:text_defaults.shop_our_latest_arrivals"
    },
    {
      "type": "url",
      "id": "link",
      "label": "t:settings.link"
    },
    {
      "type": "header",
      "content": "t:content.typography"
    },
    {
      "type": "range",
      "id": "font-size",
      "label": "t:settings.size",
      "unit": "px",
      "default": 14,
      "min": 10,
      "max": 24,
      "step": 2
    },
    {
      "type": "select",
      "id": "weight",
      "label": "t:settings.weight",
      "options": [
        {
          "value": "font-light",
          "label": "t:options.light"
        },
        {
          "value": "font-normal",
          "label": "t:options.regular"
        },
        {
          "value": "font-medium",
          "label": "t:options.medium"
        },
        {
          "value": "font-semibold",
          "label": "t:options.semibold"
        },
        {
          "value": "font-bold",
          "label": "t:options.bold"
        }
      ],
      "default": "font-normal"
    },
    {
      "type": "select",
      "id": "letter_spacing",
      "label": "t:settings.letter_spacing",
      "options": [
        {
          "value": "tracking-tight",
          "label": "t:options.tight"
        },
        {
          "value": "tracking-normal",
          "label": "t:options.normal"
        },
        {
          "value": "tracking-wide",
          "label": "t:options.loose"
        }
      ],
      "default": "tracking-normal"
    }
  ],
  "presets": [
    {
      "name": "t:names.announcement"
    }
  ]
}
{% endschema %}
